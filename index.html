<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KOTR 2026 - King of the Road Avignon</title>
    <meta name="description" content="KOTR 2026 charity cycling event in Avignon, France supporting M√©decins Sans Fronti√®res. May 28 - June 1, 2026.">

    <!-- Mapbox GL JS -->
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js"></script>
    <link href="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css" rel="stylesheet">

    <!-- Turf.js for geospatial calculations -->
    <script src="https://unpkg.com/@turf/turf@6.5.0/turf.min.js"></script>

    <!-- Styles -->
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/mobile.css">

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üö¥</text></svg>">
</head>
<body>
    <header class="hero">
        <div class="hero-content">
            <h1>KOTR 2026</h1>
            <p class="subtitle">King of the Road - Avignon</p>
            <p class="dates">May 28 - June 1, 2026</p>
            <div class="charity-badge">
                <span>Supporting</span>
                <strong>M√©decins Sans Fronti√®res</strong>
            </div>
        </div>
        <div class="hero-map" id="overview-map"></div>
    </header>

    <main>
        <section class="fundraising-banner">
            <div class="container">
                <p>Fundraising Target: <strong>¬£500 / ‚Ç¨550 / $600</strong> per rider</p>
                <a href="https://www.msf.org/" target="_blank" rel="noopener" class="btn btn-primary">Donate to MSF</a>
            </div>
        </section>

        <section class="routes-section">
            <div class="container">
                <h2>Route Schedule</h2>
                <p class="routes-intro">Choose your adventure each day. Compare short and long options at a glance.</p>

                <div class="route-cards" id="route-cards">
                    <!-- Day 1 - Warmup (No Options) -->
                    <article class="route-card warmup" data-day="1">
                        <div class="card-header">
                            <span class="day-badge">Day 1</span>
                            <time datetime="2026-05-29">May 29</time>
                            <span class="route-type-badge warmup">WARMUP</span>
                        </div>
                        <h3>Shake Out the Travel Legs</h3>
                        <div class="route-stats-single">
                            <div class="stat">
                                <span class="stat-value">46</span>
                                <span class="stat-label">km</span>
                            </div>
                            <div class="stat">
                                <span class="stat-value">240</span>
                                <span class="stat-label">m elev</span>
                            </div>
                            <div class="difficulty" data-level="1">
                                <span class="difficulty-dots" aria-label="Difficulty: Easy">‚óè‚óã‚óã‚óã</span>
                                <span class="difficulty-label">Easy</span>
                            </div>
                            <div class="duration">~2 hours</div>
                        </div>
                        <p class="route-description">Ease into the adventure with a gentle spin through Proven√ßal countryside.</p>
                        <div class="card-actions">
                            <button class="btn btn-flyover" data-route="KOTR_Avignon_D1.fit">
                                <span class="icon">üé¨</span> 3D Flyover
                            </button>
                            <button class="btn btn-download" data-route="KOTR_Avignon_D1.fit">
                                <span class="icon">üì•</span> GPX
                            </button>
                        </div>
                    </article>

                    <!-- Day 2 - Side-by-Side Comparison -->
                    <article class="route-card" data-day="2">
                        <div class="card-header">
                            <span class="day-badge">Day 2</span>
                            <time datetime="2026-05-30">May 30</time>
                        </div>
                        <h3>Find Your Rhythm</h3>

                        <div class="route-comparison">
                            <div class="route-option" data-variant="short">
                                <div class="option-header">SHORT</div>
                                <div class="option-stats">
                                    <div class="stat-row"><span class="stat-value">80</span> km</div>
                                    <div class="stat-row"><span class="stat-value">600</span> m elev</div>
                                </div>
                                <div class="difficulty" data-level="2">
                                    <span class="difficulty-dots" aria-label="Difficulty: Moderate">‚óè‚óè‚óã‚óã</span>
                                    <span class="difficulty-label">Moderate</span>
                                </div>
                                <div class="duration">~3-4 hours</div>
                            </div>

                            <div class="route-option" data-variant="long">
                                <div class="option-header">LONG</div>
                                <div class="option-stats">
                                    <div class="stat-row"><span class="stat-value">106</span> km</div>
                                    <div class="stat-row"><span class="stat-value">1,000</span> m elev</div>
                                </div>
                                <div class="difficulty" data-level="3">
                                    <span class="difficulty-dots" aria-label="Difficulty: Challenging">‚óè‚óè‚óè‚óã</span>
                                    <span class="difficulty-label">Challenging</span>
                                </div>
                                <div class="duration">~4-5 hours</div>
                            </div>
                        </div>

                        <div class="card-actions">
                            <div class="action-group">
                                <button class="btn btn-flyover btn-split" data-route-short="KOTR_Avignon_Standard_D2.fit" data-route-long="KOTR_Avignon_Long_D2.fit">
                                    <span class="icon">üé¨</span> 3D Flyover <span class="caret">‚ñæ</span>
                                </button>
                                <div class="dropdown">
                                    <button class="dropdown-item" data-variant="short">Short Route</button>
                                    <button class="dropdown-item" data-variant="long">Long Route</button>
                                </div>
                            </div>
                            <div class="action-group">
                                <button class="btn btn-download btn-split" data-route-short="KOTR_Avignon_Standard_D2.fit" data-route-long="KOTR_Avignon_Long_D2.fit">
                                    <span class="icon">üì•</span> GPX <span class="caret">‚ñæ</span>
                                </button>
                                <div class="dropdown">
                                    <button class="dropdown-item" data-variant="short">Short Route</button>
                                    <button class="dropdown-item" data-variant="long">Long Route</button>
                                </div>
                            </div>
                        </div>
                    </article>

                    <!-- Day 3 - EPIC DAY: Luberon vs Ventoux -->
                    <article class="route-card featured" data-day="3">
                        <div class="card-header">
                            <span class="day-badge">Day 3</span>
                            <time datetime="2026-05-31">May 31</time>
                            <span class="featured-badge">EPIC DAY</span>
                        </div>
                        <h3>The Main Event</h3>

                        <div class="route-comparison epic">
                            <div class="route-option" data-variant="short">
                                <div class="option-header">LUBERON</div>
                                <div class="option-stats">
                                    <div class="stat-row"><span class="stat-value">100</span> km</div>
                                    <div class="stat-row"><span class="stat-value">1,100</span> m elev</div>
                                </div>
                                <div class="difficulty" data-level="3">
                                    <span class="difficulty-dots" aria-label="Difficulty: Challenging">‚óè‚óè‚óè‚óã</span>
                                    <span class="difficulty-label">Challenging</span>
                                </div>
                                <div class="duration">~4-5 hours</div>
                            </div>

                            <div class="route-option ventoux" data-variant="long">
                                <div class="option-header">
                                    <span class="mountain-icon">üèîÔ∏è</span> MONT VENTOUX
                                </div>
                                <div class="option-stats">
                                    <div class="stat-row"><span class="stat-value">131</span> km</div>
                                    <div class="stat-row"><span class="stat-value">2,200</span> m elev</div>
                                </div>
                                <div class="difficulty" data-level="4">
                                    <span class="difficulty-dots" aria-label="Difficulty: Epic">‚óè‚óè‚óè‚óè</span>
                                    <span class="difficulty-label">Epic</span>
                                </div>
                                <div class="duration">~6-7 hours</div>
                                <div class="special-note">Beast of Provence ‚Ä¢ Summit 1,909m</div>
                            </div>
                        </div>

                        <div class="card-actions">
                            <div class="action-group">
                                <button class="btn btn-flyover btn-split" data-route-short="KOTR_Avignon_D3_Standard.fit" data-route-long="KOTR_Ventoux_D3_Long.fit">
                                    <span class="icon">üé¨</span> 3D Flyover <span class="caret">‚ñæ</span>
                                </button>
                                <div class="dropdown">
                                    <button class="dropdown-item" data-variant="short">Luberon</button>
                                    <button class="dropdown-item" data-variant="long">Mont Ventoux</button>
                                </div>
                            </div>
                            <div class="action-group">
                                <button class="btn btn-download btn-split" data-route-short="KOTR_Avignon_D3_Standard.fit" data-route-long="KOTR_Ventoux_D3_Long.fit">
                                    <span class="icon">üì•</span> GPX <span class="caret">‚ñæ</span>
                                </button>
                                <div class="dropdown">
                                    <button class="dropdown-item" data-variant="short">Luberon</button>
                                    <button class="dropdown-item" data-variant="long">Mont Ventoux</button>
                                </div>
                            </div>
                        </div>
                    </article>

                    <!-- Day 4 - Final Celebration -->
                    <article class="route-card" data-day="4">
                        <div class="card-header">
                            <span class="day-badge">Day 4</span>
                            <time datetime="2026-06-01">June 1</time>
                        </div>
                        <h3>Celebrate Together</h3>

                        <div class="route-comparison">
                            <div class="route-option" data-variant="short">
                                <div class="option-header">SHORT</div>
                                <div class="option-stats">
                                    <div class="stat-row"><span class="stat-value">85</span> km</div>
                                    <div class="stat-row"><span class="stat-value">500</span> m elev</div>
                                </div>
                                <div class="difficulty" data-level="2">
                                    <span class="difficulty-dots" aria-label="Difficulty: Moderate">‚óè‚óè‚óã‚óã</span>
                                    <span class="difficulty-label">Moderate</span>
                                </div>
                                <div class="duration">~3-4 hours</div>
                            </div>

                            <div class="route-option" data-variant="long">
                                <div class="option-header">LONG</div>
                                <div class="option-stats">
                                    <div class="stat-row"><span class="stat-value">95</span> km</div>
                                    <div class="stat-row"><span class="stat-value">620</span> m elev</div>
                                </div>
                                <div class="difficulty" data-level="2">
                                    <span class="difficulty-dots" aria-label="Difficulty: Moderate">‚óè‚óè‚óã‚óã</span>
                                    <span class="difficulty-label">Moderate</span>
                                </div>
                                <div class="duration">~3.5-4.5 hours</div>
                            </div>
                        </div>

                        <div class="card-actions">
                            <div class="action-group">
                                <button class="btn btn-flyover btn-split" data-route-short="KOTR_Avignon_D4_Standard.fit" data-route-long="KOTR_Avignon_D4_Long.fit">
                                    <span class="icon">üé¨</span> 3D Flyover <span class="caret">‚ñæ</span>
                                </button>
                                <div class="dropdown">
                                    <button class="dropdown-item" data-variant="short">Short Route</button>
                                    <button class="dropdown-item" data-variant="long">Long Route</button>
                                </div>
                            </div>
                            <div class="action-group">
                                <button class="btn btn-download btn-split" data-route-short="KOTR_Avignon_D4_Standard.fit" data-route-long="KOTR_Avignon_D4_Long.fit">
                                    <span class="icon">üì•</span> GPX <span class="caret">‚ñæ</span>
                                </button>
                                <div class="dropdown">
                                    <button class="dropdown-item" data-variant="short">Short Route</button>
                                    <button class="dropdown-item" data-variant="long">Long Route</button>
                                </div>
                            </div>
                        </div>
                    </article>
                </div>
            </div>
        </section>

        <section class="weather-section">
            <div class="container">
                <h2>Weather Forecast</h2>
                <p class="weather-subtitle">Avignon, France ‚Ä¢ Event Week</p>
                <div class="weather-widget" id="weather-widget">
                    <div class="weather-loading">Loading weather data...</div>
                </div>
            </div>
        </section>

        <section class="info-section">
            <div class="container">
                <div class="info-grid">
                    <div class="info-card">
                        <h3>üó∫Ô∏è About the Routes</h3>
                        <p>All routes start and end in Avignon. Download the GPX files for your bike computer, or experience them first in our 3D flyover.</p>
                    </div>
                    <div class="info-card">
                        <h3>üèîÔ∏è Mont Ventoux</h3>
                        <p>The "Beast of Provence" rises to 1,909m. The climb from B√©doin is 21.5km at 7.5% average. The last 6km above the tree line are legendary.</p>
                    </div>
                    <div class="info-card">
                        <h3>‚ù§Ô∏è M√©decins Sans Fronti√®res</h3>
                        <p>Every pedal stroke supports MSF's life-saving work. Doctors Without Borders provides medical care where it's needed most.</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <p>KOTR 2026 ‚Ä¢ Supporting <a href="https://www.msf.org/" target="_blank" rel="noopener">M√©decins Sans Fronti√®res</a></p>
            <p class="copyright">Made with ‚ù§Ô∏è for charity cycling</p>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="js/fit-parser.js"></script>
    <script src="js/weather-widget.js"></script>
    <script src="js/rider-profile.js"></script>
    <script src="js/power-calculator.js"></script>
    <script src="js/main.js"></script>
</body>
</html>
